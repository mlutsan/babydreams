@import 'tailwindcss';
@import 'tw-animate-css';
@import 'konsta/react/theme.css';

/* Define layer order - mobile and desktop are isolated, base is shared */
@layer mobile, desktop, base;

@custom-variant dark (@media (prefers-color-scheme: dark));


/* ==================== BASE LAYER (Shared Styles) ==================== */
@layer base {
  body {
    @apply m-0;
    font-family: -apple-system,
      BlinkMacSystemFont,
      'Segoe UI',
      'Roboto',
      'Oxygen',
      'Ubuntu',
      'Cantarell',
      'Fira Sans',
      'Droid Sans',
      'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent text size adjustment on mobile */
    -webkit-text-size-adjust: 100%;
    /* Improve tap target responsiveness */
    touch-action: manipulation;
  }

  /* Safe area support for notched devices */
  html,
  body {
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
  }

  code {
    font-family:
      source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
  }

  /* Sleep state transition animations */
  @keyframes sunSet {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
    50% {
      transform: translate(60px, 30px) scale(0.8);
      opacity: 0.5;
    }
    100% {
      transform: translate(100px, 80px) scale(0.5);
      opacity: 0;
    }
  }

  @keyframes moonRise {
    0% {
      transform: translate(100px, 80px) scale(0.5);
      opacity: 0;
    }
    50% {
      transform: translate(60px, 30px) scale(0.8);
      opacity: 0.5;
    }
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
  }

  @keyframes sunRise {
    0% {
      transform: translate(-100px, 80px) scale(0.5);
      opacity: 0;
    }
    50% {
      transform: translate(-60px, 30px) scale(0.8);
      opacity: 0.5;
    }
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
  }

  @keyframes moonSet {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
    }
    50% {
      transform: translate(-60px, 30px) scale(0.8);
      opacity: 0.5;
    }
    100% {
      transform: translate(-100px, 80px) scale(0.5);
      opacity: 0;
    }
  }

  .animate-sun-set {
    animation: sunSet 1000ms cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
  }

  .animate-moon-rise {
    animation: moonRise 1000ms cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
  }

  .animate-sun-rise {
    animation: sunRise 1000ms cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
  }

  .animate-moon-set {
    animation: moonSet 1000ms cubic-bezier(0.4, 0.0, 0.2, 1) forwards;
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-sun-set,
    .animate-moon-rise,
    .animate-sun-rise,
    .animate-moon-set {
      animation: none;
    }
  }
}
